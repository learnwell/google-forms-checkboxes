<div
  cdkDropList (cdkDropListDropped)="onQuestionDrop($event)"
  fxLayout="column" fxLayoutGap="20px"
  >
  <div
    cdkDrag cdkDragLockAxis="y"
    *ngFor="let question of questions; let i = index"
    >
    <!-- BEGIN: DRAG PLACEHOLDER -->
    <div
      *cdkDragPlaceholder
      class="example-custom-placeholder"
      >
    </div>
    <!-- END: DRAG PLACEHOLDER -->

    <!-- BEGIN: DRAG PREVIEW -->
    <mat-card
      *cdkDragPreview
      >
      <mat-card-title>
        <div
          fxLayout="column" fxLayoutAlign="center center"
          >
          <button mat-icon-button
            cdkDragHandle
            class="rotate-90"
            >
            <mat-icon>drag_indicator</mat-icon>
          </button>
          <markdown
            class="viewing-markdown"
            [data]="question.question"
            >
          </markdown>
        </div>
      </mat-card-title>
    </mat-card>
    <!-- END: DRAG PREVIEW -->

    <!-- BEGIN: ANSWER KEY MODE-->
    <mat-card
      *ngIf="i!==editingIndex"
      >
      <mat-card-title>
        <div
          fxLayout="column" fxLayoutAlign="center center"
          >
          <button mat-icon-button
            cdkDragHandle
            class="rotate-90"
            >
            <mat-icon>drag_indicator</mat-icon>
          </button>
          <markdown
            class="viewing-markdown"
            [data]="question.question"
            >
          </markdown>
        </div>
      </mat-card-title>

      <mat-card-content>
        <mat-selection-list>
          <mat-list-option
            *ngFor="let option of question.options"
            [selected]="option.correct"
            >
            {{option.answer}}
          </mat-list-option>
        </mat-selection-list>
      </mat-card-content>

      <mat-card-actions>
        <!-- Edit Question Toggle - show when in Answer Key mode -->
        <button mat-button color="accent"
          (click)="editingIndex=i"
          >
          <mat-icon>check_box</mat-icon>
          EDIT QUESTION
        </button>
      </mat-card-actions>
    </mat-card>
    <!-- END: ANSWER KEY MODE-->

    <!-- BEGIN: EDIT QUESTION MODE-->
    <mat-card
      *ngIf="i===editingIndex"
      >
      <mat-card-title>
        <div
          fxLayout="column" fxLayoutAlign="center stretch"
          >
          <button mat-icon-button
            fxFlexAlign="center"
            cdkDragHandle
            class="rotate-90"
            >
            <mat-icon>drag_indicator</mat-icon>
          </button>
          <mat-form-field>
            <textarea matInput
              cdkTextareaAutosize cdkAutosizeMinRows="3" cdkAutosizeMaxRows="6"
              [(ngModel)]="question.question"
              >
            </textarea>
          </mat-form-field>
        </div>
      </mat-card-title>

      <mat-list
        cdkDropList (cdkDropListDropped)="onAnswerDrop($event)"
        role="list"
        class="adjust-height"
        >
        <mat-list-item
          cdkDrag cdkDragLockAxis="y" [cdkDragData]="question.options"
          *ngFor="let option of question.options"
          >
          <mat-icon matListIcon>drag_indicator</mat-icon>
          <mat-form-field role="listitem">
            <textarea matInput
              cdkTextareaAutosize cdkAutosizeMinRows="1" cdkAutosizeMaxRows="6"
              [(ngModel)]="option.answer"
              >
            </textarea>
          </mat-form-field>
        </mat-list-item>
      </mat-list>

      <mat-card-actions>
        <!-- Answer Key Toggle - show when in Answer Key mode -->
        <button mat-button color="accent"
          (click)="editingIndex=-1"
          >
          <mat-icon>check_box</mat-icon>
          ANSWER KEY
        </button>
      </mat-card-actions>
    </mat-card>
    <!-- END: EDIT QUESTION MODE-->

  </div>
</div>
